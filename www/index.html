<!doctypehtml><html><head><title>Page Sandbox</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0"><base target=_blank><style>body{padding:0 .5em}.box{margin-top:1em}#txtURL{width:100%;height:2em;text-indent:.5em;padding:.25em 0}#btnGo{width:100%;font-size:1.5em}#list a{margin:1em}</style></head><body><div class=box><input id=txtURL value=www.google.com autofocus></div><div class=box><button id=btnGo disabled=disabled>初始化中...</button></div><div class=box><span>切换线路:</span> <select id=selNode disabled=disabled></select></div><div class=box id=list></div><script>var i=110,r=111,l=112,s=113,e=200,u=201,o=navigator.serviceWorker;function c(){return location.pathname.replace(/\w+\.\w+$/,"").replace(/\/*$/,"/")}function t(){selNode.disabled=!1,o.addEventListener("message",n),setTimeout(f,20,e)}function n(e){var t=e.data,n=t[0],o=t[1];switch(n){case l:conf=o,function c(){!function o(){var e=location.hash.match(/test=([\w\-.:]+)/);if(!e)return;var t=e[1];conf.node_map[t]={label:t,lines:[t]},conf.node_default=t,f(i,conf)}();var n=conf.node_map;Object.keys(n).forEach(function(e){var t=n[e];t.hidden||function o(e,t){var n=document.createElement("option");n.id="--"+e,n.text=t,n.value=e,selNode.appendChild(n)}(e,t.label)}),g()}();break;case s:conf=o,g();break;case u:console.log("sw ready"),function a(){list.innerHTML=d.map(function(e){var t=e[0],n=e[1]||"www."+t+".com";return"<a rel=noopener href=./-----https://"+n+"><img width=128 height=128 src=assets/ico/"+t+".png></a>"}).join("")}(),f(r)}}function a(e){txtURL.value=e}function f(e,t){var n=o.controller;n?n.postMessage([e,t]):console.log("ctl is null")}btnGo.onclick=function(){var e=txtURL.value.trim();0<=e.indexOf("-----")&&(e=e.split("-----").pop(),txtURL.value=e);var t=function n(e){return c()+"-----"+e}(function o(e){return/^https?:\/\//i.test(e)?e:/\.(com|cn|net|org|tv)$/.test(e)?"https://"+e:"https://www.google.com/search?q="+encodeURIComponent(e)}(e));open(t).opener=null},txtURL.onkeypress=function(e){13===e.keyCode&&btnGo.onclick()},txtURL.setSelectionRange(0,txtURL.value.length),selNode.onchange=function(){var e=this.options[this.selectedIndex].value;conf.node_default=e,f(i,conf)};var d=[["google",""],["youtube",""],["twitter","twitter.com/google"],["flickr",""],["quora","www.quora.com/topic/JavaScript-programming-language"],["twitch","www.twitch.tv"],["reddit",""],["wiki","zh.wikipedia.org"],["gist","gist.github.com"],["facebook","facebook.com/Google/"],["blogger",""]];function g(){var e=conf.node_default,t=document.getElementById("--"+e);t?t.selected=!0:console.warn("unknown node:",e)}!function h(){console.log("JsProxy v0.0.10 https://github.com/EtherDream/jsproxy/"),self.isSecureContext?o&&self.ReadableStream?(btnGo.disabled=!1,btnGo.textContent="Go",function e(){o.getRegistration().then(function(e){e?t():o.register(c()+"sw.js").then(function(e){return o.ready}).then(t)["catch"](a)})}()):txtURL.value="浏览器版本过低，推荐使用最新版 Chrome 浏览器":txtURL.value="本程序需要 HTTPS 站点"}()</script></body></html>